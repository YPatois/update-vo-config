.TH getprof "1" "4 September 2017" "User Commands"
.SH NAME
getprof \- Download host or cluster profile
.SH SYNOPSIS
.B getprof
[\fB-Dms\fR] [\fB-d\fR \fIpath\fR] {\fIhost\fR|\fIalias\fR} ...
.br
.B getprof
[\fB-Dms\fR] [\fB-d\fR \fIpath\fR]
.B -C
.IR cluster " ..."
.br
.B getprof
.B -h
.RE
.SH DESCRIPTION
Download one or more host or cluster profiles from Aquilon broker and send
to stdout, or optionally to an elected output directory.

By default, one profile is downloaded over HTTP, after alias expansion
from
.BR ~/etc/aqs.tab .
The DNS domain name may be omitted, in which case it will be added from
.BR /etc/resolv.conf .

Use the
.B -d
option if downloading more than one profile at a time.
.SH OPTIONS
The following options are supported:
.RS 4
.TP 4
.B -C
Download cluster profile instead of host profile.
.TP
.B -D
Enables debug output.
.TP
.BI -d " path"
Use this output directory instead of sending to stdout.  If this is specified,
the profile will be written to the provided directory, creating it first if it
does not exist, and will not send the profile to stdout.
.TP
.B -h
Displays a help message.
.TP
.B -m
Download member profiles from a given cluster as well as the cluster profile.
Use with
.B -C
and
.BR -d .
.TP
.B -s
Use SSH instead of HTTP to download one or more matching profiles.  If more
than one profile is matched, then all matching profiles will be sent
in succession to stdout.  The number of matching profiles will be reported
to stderr.
.RE
.SH "ENVIRONMENT VARIABLES"
The
.B AQD_HOST
environment variable overrides the default hostname of the Aquilon broker from which to
download host profiles.

For compatibility reasons, the
.B AQHOST
environment variable may also be used.  If both environment variables are specified, then
.B AQD_HOST
takes precedence.
.SH "SEE ALSO"
.BR aqs (1),
.BR rifle (1),
.BR aqs.tab (5).
.SH AUTHORS
Mark R. Bannister <mark.bannister@morganstanley.com>
.SH LICENSE
Use of this software is subject to the Apache 2 License:
.br
http://www.opensource.org/licenses/apache2.0

See source code for the COPYRIGHT file.
